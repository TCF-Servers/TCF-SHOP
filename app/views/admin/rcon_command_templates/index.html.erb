<% content_for(:page_title) { "Templates RCON" } %>

<div class="admin-section">
  <div class="admin-section-header">
    <h2 class="admin-section-title">
      <span class="admin-section-title-icon">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
          <polyline points="14 2 14 8 20 8"/>
          <line x1="16" y1="13" x2="8" y2="13"/>
          <line x1="16" y1="17" x2="8" y2="17"/>
          <polyline points="10 9 9 9 8 9"/>
        </svg>
      </span>
      Templates de commandes
    </h2>
    <button type="button" class="admin-btn admin-btn-primary" data-bs-toggle="modal" data-bs-target="#RconModal">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
        <line x1="12" y1="5" x2="12" y2="19"/>
        <line x1="5" y1="12" x2="19" y2="12"/>
      </svg>
      Nouveau template
    </button>

    <%= render "rcon_modal" %>
  </div>

  <div class="admin-templates-grid" id="templates_grid">
    <% @templates.each do |template| %>
      <%= render "template_card", template: template %>
    <% end %>

    <% if @templates.empty? %>
      <div class="admin-templates-empty" id="templates_empty">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
          <polyline points="14 2 14 8 20 8"/>
          <line x1="12" y1="18" x2="12" y2="12"/>
          <line x1="9" y1="15" x2="15" y2="15"/>
        </svg>
        <p>Aucun template de commande RCON</p>
        <span>Cliquez sur "Nouveau template" pour en creer un</span>
      </div>
    <% end %>
  </div>
</div>

<!-- Modal Template -->
<div class="modal fade" id="templateModal" tabindex="-1" aria-hidden="true">
  <button type="button" class="d-none" data-bs-dismiss="modal" aria-label="Close"></button>
  <div class="modal-dialog modal-dialog-centered">
    <%= turbo_frame_tag "template_modal_content" do %>
      <div class="modal-content admin-modal">
        <div class="modal-body text-center py-5">
          <div class="spinner-border text-secondary" role="status">
            <span class="visually-hidden">Chargement...</span>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>
